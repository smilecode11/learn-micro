(function(){"use strict";var __webpack_modules__={1636:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return performScript}});const performScript=(e,t,n)=>{window.proxy=n;let o=`\n        return ((window)=>{\n            ${e}\n            return window['${t}']\n        })(window.proxy)\n    `;return new Function(o)()},performScriptForEval=(script,appName,global)=>{window.proxy=global;let scriptText=`\n        ((window)=>{\n            ${script}\n            return window['${appName}']\n        })(window.proxy)\n    `;return eval(scriptText)}},7323:function(e,t,n){var o=n(9242),r=n(359),a=n(3115),i=(n(7040),n(164));const c=[{path:"/",component:()=>Promise.resolve().then(n.bind(n,359))},{path:"/micro-vue3",component:()=>Promise.resolve().then(n.bind(n,359))},{path:"/micro-vue2",component:()=>Promise.resolve().then(n.bind(n,359))},{path:"/micro-react17",component:()=>Promise.resolve().then(n.bind(n,359))}],u=(e="")=>(0,i.p7)({history:(0,i.PO)(e),routes:c});var _=u;n(1703);let s=[];const l=()=>s,p=e=>s=e;let d={};const w=()=>d,m=e=>d=e,f=(e,t)=>function(){const n=new Event(t);e.apply(this,arguments),window.dispatchEvent(n)},h=()=>{const e=window.location.pathname;return b("activeRoute",e)},v=e=>b("activeRoute",e),b=(e,t)=>{const n=l().filter((n=>n[e]===t));return n&&n.length>0?n[0]:{}},y=()=>{const{pathname:e,hash:t}=window.location,n=e+t,o=n.match(/(\/[\w|-]+)/g);if(o&&o[0]===window.__CURRENT_SUB_APP__)return!1;window.__ORIGIN_SUB_APP__=window.__CURRENT_SUB_APP__;const r=window.location.pathname.match(/(\/[\w|-]+)/);return r?(window.__CURRENT_SUB_APP__=r[0],!0):void 0},g=async e=>window.fetch(e).then((async e=>await e.text()));var k=n(1636);let S={};class x{constructor(){this.proxy=null,this.active()}active(){this.proxy=new Proxy(window,{get(e,t){return"function"===typeof e[t]?e[t].bind(e):S[t]||e[t]},set(e,t,n){return S[t]=n,!0}})}inactive(){S={}}}const P=e=>e&&e.bootstrap&&e.mount&&e.unmount,q=(e,t)=>{window.__MICRO_WEB__=!0;let n=new x;e.proxy||(e.proxy=n);const o=(0,k.c)(t,e.name,e.proxy.proxy);P(o)&&(e.bootstrap=o.bootstrap,e.mount=o.mount,e.unmount=o.unmount)},L=async e=>{let{entry:t,container:n}=e;const[o,r]=await E(t,e.name);let a=document.querySelector(n);if(!a)throw new Error("请检查子应用容器");return a.innerHTML=o,r.forEach((t=>q(e,t))),e},R={},E=async(e,t)=>{if(R[t])return R[t];let n=await g(e),o=[];const r=document.createElement("div");r.innerHTML=n;const[a,i,c]=await I(r,e);let u=await Promise.all(i.map((async e=>await g(e))));return o=c.concat(u),R[t]=[a,o],[a,o]},I=async(e,t)=>{const n=e.outerHTML,o=[],r=[];function a(e){const n=e.children,i=e.parent;if("script"===e.nodeName.toLowerCase()){let n=e.getAttribute("src");n?n.startsWith("http")?o.push(n):o.push(`http:${t}/${n}`):r.push(e.outerHTML)}if(i&&i.replaceChild(document.createComment("此 js 文件已经被微前端替换"),e),"link"===e.nodeName.toLowerCase()){let n=e.getAttribute("href");n.endsWith(".js")&&(n.startsWith("http")?o.push(n):o.push(`http:${t}/${n}`))}for(let t=0;t<n.length;t++)a(n[t])}return a(e),[n,o,r]},C=async()=>{let e=v(window.__ORIGIN_SUB_APP__),t=v(window.__CURRENT_SUB_APP__);if(!t.name)return;e.name&&e.unmount&&(e.proxy&&e.proxy.inactive(),await U(e));const n=await O(t);await T(n)},O=async e=>{await N("beforeLoad");let t=await L(e);return t&&t.bootstrap&&t.bootstrap(),t},T=async e=>{e&&e.mount&&e.mount({entry:e.entry,appInfo:e.appInfo}),await N("mounted")},U=async e=>{e&&e.unmount&&e.unmount(),await N("destoryed")},N=async e=>{const t=w();await Promise.all(t[e].map((async e=>await e())))},W=async()=>{y()&&(await C(),console.log("路由更新"))},j=()=>{window.history.pushState=f(window.history.pushState,"micro_push"),window.history.replaceState=f(window.history.replaceState,"micro_replace"),window.addEventListener("micro_push",W),window.addEventListener("micro_replace",W),window.onpopstate=function(){W()}};class H{on(e,t){window.addEventListener(e,(e=>{t(e.detail)}))}emit(e,t){const n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)}}const A=async()=>{const e=l().filter((e=>!window.location.pathname.startsWith(e.activeRoute)));await Promise.all(e.map((async e=>await E(e.entry,e.name))))},F=new H;F.on("testevent",(e=>{console.log(e)})),window.custom=F,j();const B=(e,t)=>{p(e),m(t)},M=()=>{const e=l();if(!e.length)throw Error("子应用列表为空, 请正确注册");const t=h(),{pathname:n,hash:o}=window.location;if(t){const e=n+o;window.__CURRENT_SUB_APP__=t.activeRoute,window.history.pushState("","",e)}A()},Z=(e={})=>(()=>{let t=e;const n=[],o=()=>t,r=e=>{if(e!==t){const o=t;t=e,n.forEach((async e=>await e(t,o)))}},a=e=>{n.push(e)};return{getStore:o,update:r,subscribe:a}})();var $=n(1050);const z=Z();window.store=z;const D=z.getStore();z.subscribe(((e,t)=>{console.log(e,t,"- subscribe")})),z.update({...D,a:123});const G=e=>{B(e,{beforeLoad:[()=>{(0,$.changeLoading)(!0)}],mounted:[()=>{(0,$.changeLoading)(!1)}],destoryed:[()=>{}]}),M()};var V=n(3564);const Y=[{name:"micro-vue2",activeRoute:"/micro-vue2",container:"#micro-container",entry:"//localhost:9004/",appInfo:V},{name:"micro-vue3",activeRoute:"/micro-vue3",container:"#micro-container",entry:"//localhost:9005/",appInfo:V},{name:"micro-react17",activeRoute:"/micro-react17",container:"#micro-container",entry:"//localhost:9002/",appInfo:V}];G(Y);const K=(0,o.ri)(r["default"]);K.use(a.Z,{size:"lagger",zIndex:3e3}),K.use(_()),K.mount("#app")},3564:function(e,t,n){n.r(t),n.d(t,{footer:function(){return r},header:function(){return o},loading:function(){return a}});var o={};n.r(o),n.d(o,{changeHeader:function(){return u},headerStatus:function(){return c}});var r={};n.r(r),n.d(r,{changeFooter:function(){return s},footerStatus:function(){return _}});var a=n(1050),i=n(4870);const c=(0,i.iH)(!0),u=e=>c.value=e,_=(0,i.iH)(!0),s=e=>_.value=e},1050:function(e,t,n){n.r(t),n.d(t,{changeLoading:function(){return a},loadingRef:function(){return r}});var o=n(4870);const r=(0,o.iH)(!1),a=e=>{r.value=e}},359:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var o=n(3396),r=n(9242);const a={class:"main-container"},i={id:"micro-container"};function c(e,t,n,c,u,_){const s=(0,o.up)("Header"),l=(0,o.up)("Loading"),p=(0,o.up)("el-main"),d=(0,o.up)("Footer");return(0,o.wg)(),(0,o.iD)("div",a,[(0,o.wy)((0,o.Wm)(s,null,null,512),[[r.F8,e.headerStatus]]),(0,o.Wm)(p,null,{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(l,null,null,512),[[r.F8,e.isLoading]]),(0,o.wy)((0,o._)("div",i,"子应用内容",512),[[r.F8,!e.isLoading]])])),_:1}),(0,o.wy)((0,o.Wm)(d,null,null,512),[[r.F8,e.footerStatus]])])}var u=n(7139);function _(e,t,n,r,a,i){const c=(0,o.up)("el-menu-item"),_=(0,o.up)("el-menu"),s=(0,o.up)("el-header");return(0,o.wg)(),(0,o.j4)(s,{class:"header"},{default:(0,o.w5)((()=>[(0,o.Wm)(_,{"default-active":e.activeIndex,mode:"horizontal",onSelect:e.handleSelect},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.NAV_LIST,((e,t)=>((0,o.wg)(),(0,o.j4)(c,{key:t,index:String(t)},{default:(0,o.w5)((()=>[(0,o.Uk)((0,u.zw)(e.name),1)])),_:2},1032,["index"])))),128))])),_:1},8,["default-active","onSelect"])])),_:1})}var s=n(4870),l=n(164);const p=[{name:"首页",status:!0,value:0,url:"/micro-vue3/#/home-page",hash:""},{name:"选车",status:!1,value:0,url:"/micro-vue2/#/select-car",hash:""},{name:"消息",status:!1,value:3,url:"/micro-react17/#/index",hash:""},{name:"登录",status:!1,value:4,url:"/micro-vue3/#/login",hash:""}];var d=(0,o.aZ)({name:"HeaderContainer",setup(){const e=(0,l.tv)(),t=(0,l.yj)(),n=(0,s.iH)("0"),r=t=>{t!==n.value&&e.push(p[Number(t)].url)};return(0,o.YP)(t,(e=>{const t=p.findIndex((t=>t.url===e.fullPath))||0;n.value=String(t)}),{deep:!0}),{NAV_LIST:p,activeIndex:n,handleSelect:r}}}),w=n(89);const m=(0,w.Z)(d,[["render",_],["__scopeId","data-v-10b1efe2"]]);var f=m;const h=(0,o.Uk)("footer"),v=(0,o.Uk)(" Footer Content ");function b(e,t,n,r,a,i){const c=(0,o.up)("el-divider"),u=(0,o.up)("el-footer");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(c,{"content-position":"left"},{default:(0,o.w5)((()=>[h])),_:1}),(0,o.Wm)(u,null,{default:(0,o.w5)((()=>[v])),_:1})])}var y={name:"FooterContainer",setup(){return{}}};const g=(0,w.Z)(y,[["render",b]]);var k=g;const S={class:"loading-container"};function x(e,t,n,r,a,i){const c=(0,o.up)("loading",!0),u=(0,o.up)("el-icon");return(0,o.wg)(),(0,o.iD)("div",S,[(0,o.Wm)(u,{class:"is-loading"},{default:(0,o.w5)((()=>[(0,o.Wm)(c)])),_:1})])}var P=n(3632),q={name:"LoadingContainer",components:{Loading:P.Z}};const L=(0,w.Z)(q,[["render",x],["__scopeId","data-v-5ec1b60d"]]);var R=L,E=n(3564),I=(0,o.aZ)({name:"App",setup(){return{isLoading:E.loading.loadingRef,headerStatus:E.header.headerStatus,footerStatus:E.footer.footerStatus}},components:{Header:f,Footer:k,Loading:R}});const C=(0,w.Z)(I,[["render",c]]);var O=C}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,n,o,r){if(!n){var a=1/0;for(_=0;_<e.length;_++){n=e[_][0],o=e[_][1],r=e[_][2];for(var i=!0,c=0;c<n.length;c++)(!1&r||a>=r)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[c])}))?n.splice(c--,1):(i=!1,r<a&&(a=r));if(i){e.splice(_--,1);var u=o();void 0!==u&&(t=u)}}return t}r=r||0;for(var _=e.length;_>0&&e[_-1][2]>r;_--)e[_]=e[_-1];e[_]=[n,o,r]}}(),function(){__webpack_require__.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return __webpack_require__.d(t,{a:t}),t}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,a=n[0],i=n[1],c=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)__webpack_require__.o(i,o)&&(__webpack_require__.m[o]=i[o]);if(c)var _=c(__webpack_require__)}for(t&&t(n);u<a.length;u++)r=a[u],__webpack_require__.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return __webpack_require__.O(_)},n=self["webpackChunkmicro_main"]=self["webpackChunkmicro_main"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__.O(void 0,[998],(function(){return __webpack_require__(7323)}));__webpack_exports__=__webpack_require__.O(__webpack_exports__)})();
//# sourceMappingURL=app.57117020.js.map